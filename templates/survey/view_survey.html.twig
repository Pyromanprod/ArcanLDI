{% extends 'base.html.twig' %}

{% block body %}
    <div class="container">
        <div class="row mt-5">

            <div class="card text-white bg-cardgame mb-3 col-12 col-md-8 col-lg-6">
                <div class="card-header"><h1>{{ survey.name }}</h1></div>
                <div class="card-body">
                    <h2>{{ survey.question.count }} Questions</h2>
                    <form action="{{ path('survey_ordered', {'id': survey.id}) }}" method="post">
                        <table class="table table-striped table-dark ">
                            <tr>
                                <th>Question</th>
                                <th>Choix</th>
                                <th>ordre</th>
                            </tr>
                            {% for index, question  in survey.question|sort((a, b) => a.orderBy <=> b.orderBy) %}

                                <tr>
                                    <td>
                                        {{ question.content }}

                                    </td>
                                    <td>

                                        {% for choix in question.choices %}
                                            {{ choix.content }}
                                        {% else %}
                                            RÃ©ponse libre
                                        {% endfor %}
                                    </td>

                                    <td>

                                        <input type="number"
                                               value="{{ question.orderBy != null ? question.orderBy : index + 1 }}"
                                               name="question[{{ question.id }}]"
                                               min=1>
                                    </td>
                                </tr>
                            {% else %}
                                Pas de questions a ce formulaire
                            {% endfor %}
                        </table>
                        <button type="submit">Test</button>
                    </form>
                </div>
                <div class="card-footer bg-transparent border-secondary">
                    <a href="{{ path('survey_add_question',{'id': survey.id}) }}" class="btn btn-outline-light">Ajouter
                        une question</a>
                </div>
            </div>
        </div>

        <div class="row">

        </div>
        <div class="row">

        </div>

    </div>
{% endblock %}

{% block title %}
    {{ survey.name }}
{% endblock %}

